{
  "openapi": "3.0.0",
  "info": {
    "title": "MONTY PYTHON BEST QUOTES API",
    "version": "1.0.0",
    "description": "With this API you can get quotes/scenes from 3 Monty Python movies: 'Life of Brian', 'The Meaning of ' and 'Monty Python and The Holy Grail'. Quotes and scenes can be get by random or by movie name (substring of the name) and scene number (or scene name, part of the scene name) If you register as a user with this api, you can also create your top-5 favourite quotes list"
  },
  "paths": {
    "/users": {
      "post": {
        "summary": "Create a new user",
        "tags": [
          "users"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "5XX": {
            "description": "Unexpected error"
          }
        }
      }
    },
    "/users/{id}/tops": {
      "get": {
        "security": [
          {
            "basicAuth": []
          }
        ],
        "summary": "Get user's top quotes sorted by quote's text",
        "tags": [
          "users"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "User ID",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Tops"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    }
  },
  "security": [
    {
      "basicAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "basicAuth": {
        "type": "http",
        "scheme": "basic"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "The user ID"
          },
          "username": {
            "type": "string",
            "description": "The user name"
          },
          "password": {
            "type": "string",
            "description": "Hash for the user password"
          }
        }
      },
      "Tops": {
        "description": "An array of \"dictionaries\" with top user's quotes",
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "movie": {
              "type": "string"
            },
            "scene": {
              "type": "string"
            },
            "character": {
              "type": "string"
            },
            "type": {
              "type": "string",
              "enum": [
                "dialogue",
                "direction"
              ]
            },
            "quote": {
              "type": "string"
            }
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        },
        "required": [
          "code",
          "message"
        ]
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "NotFound": {
        "description": "The specified resource was not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "default": {
        "description": "Unexpected error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      }
    }
  }
}